{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jjong/Desktop/React/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/jjong/Desktop/React/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/jjong/Desktop/React/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import firebase from\"../../firebase.js\";import axios from\"axios\";import{LoginDiv}from\"../../Style/UserCSS.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),Name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),Email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),PW=_useState6[0],setPW=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),PWConfirm=_useState8[0],setPWConfirm=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),Flag=_useState10[0],setFlag=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),NameCheck=_useState12[0],setNameCheck=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),NameInfo=_useState14[0],setNameInfo=_useState14[1];var user=useSelector(function(state){return state.user;});var navigate=useNavigate();useEffect(function(){if(user.accessToken){navigate(\"/\");}},[]);var RefisterFunc=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var createdUser,body;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setFlag(true);e.preventDefault();if(Name&&Email&&PW&&PWConfirm){_context.next=4;break;}return _context.abrupt(\"return\",alert(\"Please fill in all fields.\"));case 4:if(!(PW!=PWConfirm)){_context.next=6;break;}return _context.abrupt(\"return\",alert(\"Passwords must match.\"));case 6:if(NameCheck){_context.next=8;break;}return _context.abrupt(\"return\",alert(\"Please check your nickname.\"));case 8:_context.next=10;return firebase.auth().createUserWithEmailAndPassword(Email,PW);case 10:createdUser=_context.sent;_context.next=13;return createdUser.user.updateProfile({displayName:Name,photoURL:\"https://kr.object.ncloudstorage.com/react-community/user/profile.png\"});case 13:body={email:createdUser.user.multiFactor.user.email,displayName:createdUser.user.multiFactor.user.displayName,uid:createdUser.user.multiFactor.user.uid,photoURL:\"https://kr.object.ncloudstorage.com/react-community/user/profile.png\"};axios.post(\"/api/user/register\",body).then(function(response){setFlag(false);if(response.data.success){navigate(\"/login\");}else{return alert(\"registration failed.\");}});case 15:case\"end\":return _context.stop();}},_callee);}));return function RefisterFunc(_x){return _ref.apply(this,arguments);};}();var NameCheckFunc=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var body;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(Name){_context2.next=3;break;}return _context2.abrupt(\"return\",alert(\"Please enter your nickname\"));case 3:body={dispalyName:Name};_context2.next=6;return axios.post(\"/api/user/namecheck\",body).then(function(response){if(response.data.success){if(response.data.check){setNameCheck(true);setNameInfo(\"Available Username.\");}else{setNameInfo(\"This Username already registered.\");}}});case 6:case\"end\":return _context2.stop();}},_callee2);}));return function NameCheckFunc(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(LoginDiv,{children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",value:Name,onChange:function onChange(e){return setName(e.currentTarget.value);},disabled:NameCheck}),NameInfo,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return NameCheckFunc(e);},children:\"Username Checks\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:Email,onChange:function onChange(e){return setEmail(e.currentTarget.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:PW,minLength:8,onChange:function onChange(e){return setPW(e.currentTarget.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Confirm password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:PWConfirm,minLength:8,onChange:function onChange(e){return setPWConfirm(e.currentTarget.value);}}),/*#__PURE__*/_jsx(\"button\",{disabled:Flag,onClick:function onClick(e){return RefisterFunc(e);},children:\"Sign Up\"})]})});}export default Register;","map":{"version":3,"names":["React","useState","useEffect","useSelector","useNavigate","firebase","axios","LoginDiv","jsx","_jsx","jsxs","_jsxs","Register","_useState","_useState2","_slicedToArray","Name","setName","_useState3","_useState4","Email","setEmail","_useState5","_useState6","PW","setPW","_useState7","_useState8","PWConfirm","setPWConfirm","_useState9","_useState10","Flag","setFlag","_useState11","_useState12","NameCheck","setNameCheck","_useState13","_useState14","NameInfo","setNameInfo","user","state","navigate","accessToken","RefisterFunc","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","createdUser","body","wrap","_callee$","_context","prev","next","preventDefault","abrupt","alert","auth","createUserWithEmailAndPassword","sent","updateProfile","displayName","photoURL","email","multiFactor","uid","post","then","response","data","success","stop","_x","apply","arguments","NameCheckFunc","_ref2","_callee2","_callee2$","_context2","dispalyName","check","_x2","children","type","value","onChange","currentTarget","disabled","onClick","minLength"],"sources":["C:/Users/jjong/Desktop/React/client/src/Component/User/Register.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport firebase from \"../../firebase.js\";\r\nimport axios from \"axios\";\r\n\r\nimport { LoginDiv } from \"../../Style/UserCSS.js\";\r\n\r\nfunction Register() {\r\n  const [Name, setName] = useState(\"\");\r\n  const [Email, setEmail] = useState(\"\");\r\n  const [PW, setPW] = useState(\"\");\r\n  const [PWConfirm, setPWConfirm] = useState(\"\");\r\n  const [Flag, setFlag] = useState(false);\r\n  const [NameCheck, setNameCheck] = useState(false);\r\n  const [NameInfo, setNameInfo] = useState(\"\");\r\n\r\n  const user = useSelector((state) => state.user);\r\n  let navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (user.accessToken) {\r\n      navigate(\"/\");\r\n    }\r\n  }, []);\r\n\r\n  const RefisterFunc = async (e) => {\r\n    setFlag(true);\r\n    e.preventDefault();\r\n    if (!(Name && Email && PW && PWConfirm)) {\r\n      return alert(\"Please fill in all fields.\");\r\n    }\r\n    if (PW != PWConfirm) {\r\n      return alert(\"Passwords must match.\");\r\n    }\r\n    if (!NameCheck) {\r\n      return alert(\"Please check your nickname.\");\r\n    }\r\n    let createdUser = await firebase\r\n      .auth()\r\n      .createUserWithEmailAndPassword(Email, PW);\r\n\r\n    await createdUser.user.updateProfile({\r\n      displayName: Name,\r\n      photoURL:\r\n        \"https://kr.object.ncloudstorage.com/react-community/user/profile.png\",\r\n    });\r\n\r\n    let body = {\r\n      email: createdUser.user.multiFactor.user.email,\r\n      displayName: createdUser.user.multiFactor.user.displayName,\r\n      uid: createdUser.user.multiFactor.user.uid,\r\n      photoURL:\r\n        \"https://kr.object.ncloudstorage.com/react-community/user/profile.png\",\r\n    };\r\n    axios.post(\"/api/user/register\", body).then((response) => {\r\n      setFlag(false);\r\n      if (response.data.success) {\r\n        \r\n        navigate(\"/login\");\r\n      } else {\r\n        \r\n        return alert(\"registration failed.\");\r\n      }\r\n    });\r\n  };\r\n\r\n  const NameCheckFunc = async (e) => {\r\n    e.preventDefault();\r\n    if (!Name) {\r\n      return alert(\"Please enter your nickname\");\r\n    }\r\n\r\n    let body = {\r\n      dispalyName: Name,\r\n    };\r\n\r\n    await axios.post(\"/api/user/namecheck\", body).then((response) => {\r\n      if (response.data.success) {\r\n        if (response.data.check) {\r\n          setNameCheck(true);\r\n          setNameInfo(\"Available Username.\");\r\n        } else {\r\n          setNameInfo(\"This Username already registered.\");\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <LoginDiv>\r\n      <form>\r\n        <label>Username</label>\r\n        <input\r\n          type=\"name\"\r\n          value={Name}\r\n          onChange={(e) => setName(e.currentTarget.value)}\r\n          disabled={NameCheck}\r\n        />\r\n        {NameInfo}\r\n        <button onClick={(e) => NameCheckFunc(e)}>Username Checks</button>\r\n        <label>Email</label>\r\n        <input\r\n          type=\"email\"\r\n          value={Email}\r\n          onChange={(e) => setEmail(e.currentTarget.value)}\r\n        />\r\n        <label>Password</label>\r\n        <input\r\n          type=\"password\"\r\n          value={PW}\r\n          minLength={8}\r\n          onChange={(e) => setPW(e.currentTarget.value)}\r\n        />\r\n        <label>Confirm password</label>\r\n        <input\r\n          type=\"password\"\r\n          value={PWConfirm}\r\n          minLength={8}\r\n          onChange={(e) => setPWConfirm(e.currentTarget.value)}\r\n        />\r\n        <button disabled={Flag} onClick={(e) => RefisterFunc(e)}>\r\n          Sign Up\r\n        </button>\r\n      </form>\r\n    </LoginDiv>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}