{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jjong\\\\Desktop\\\\React\\\\client\\\\src\\\\Component\\\\User\\\\MyPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport Avatar from \"react-avatar\";\nimport axios from \"axios\";\nimport firebase from \"../../firebase.js\";\nimport { MyPageDiv } from \"../../Style/UserCSS.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MyPage() {\n  _s();\n  const user = useSelector(state => state.user);\n  const navigate = useNavigate();\n  const [CurrentImage, setCurrentImage] = useState(\"\");\n  useEffect(() => {\n    if (user.isLoading && !user.accessToken) {\n      navigate(\"/login\");\n    } else {\n      setCurrentImage(user.photoURL);\n    }\n  }, [user]);\n  const ImageUpload = e => {\n    var formData = new FormData();\n    formData.append(\"file\", e.target.files[0]);\n    axios.post(\"/api/user/profile/img\", formData).then(response => {\n      setCurrentImage(response.data.filePath);\n    });\n  };\n  const SaveProfile = async e => {\n    e.preventDefault();\n    try {\n      await firebase.auth().currentUser.updateProfile({\n        photoURL: CurrentImage\n      });\n    } catch (error) {\n      return alert(\"프로필 저장에 실패하였습니다.\");\n    }\n    let body = {\n      photoURL: CurrentImage,\n      uid: user.uid\n    };\n    axios.post(\"/api/user/profile/update\", body).then(response => {\n      if (response.data.success) {\n        alert(\"프로필 저장에 성공하였습니다.\");\n        window.location.reload();\n      } else {\n        return alert(\"프로필 저장에 실패하였습니다.\");\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(MyPageDiv, {\n    style: {\n      width: \"100vw\",\n      height: \"100vh\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      style: {\n        width: \"50%\",\n        margin: \"0 auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        marginTop: \"2rem\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          style: {\n            display: \"none\"\n          },\n          onChange: e => ImageUpload(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Avatar, {\n          size: \"100\",\n          round: true,\n          src: CurrentImage,\n          style: {\n            border: \"1px solid #c6c6c6\",\n            cursor: \"pointer\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => SaveProfile(e),\n        children: \"\\uC800\\uC7A5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(MyPage, \"lMUy1mIezOfm7hoZOhGCjNwJ4b4=\", false, function () {\n  return [useSelector, useNavigate];\n});\n_c = MyPage;\nexport default MyPage;\nvar _c;\n$RefreshReg$(_c, \"MyPage\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","useNavigate","Avatar","axios","firebase","MyPageDiv","jsxDEV","_jsxDEV","MyPage","_s","user","state","navigate","CurrentImage","setCurrentImage","isLoading","accessToken","photoURL","ImageUpload","e","formData","FormData","append","target","files","post","then","response","data","filePath","SaveProfile","preventDefault","auth","currentUser","updateProfile","error","alert","body","uid","success","window","location","reload","style","width","height","children","margin","display","flexDirection","alignItems","marginTop","type","accept","onChange","fileName","_jsxFileName","lineNumber","columnNumber","size","round","src","border","cursor","onClick","_c","$RefreshReg$"],"sources":["C:/Users/jjong/Desktop/React/client/src/Component/User/MyPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Avatar from \"react-avatar\";\r\nimport axios from \"axios\";\r\nimport firebase from \"../../firebase.js\";\r\nimport { MyPageDiv } from \"../../Style/UserCSS.js\";\r\n\r\nfunction MyPage() {\r\n  const user = useSelector((state) => state.user);\r\n  const navigate = useNavigate();\r\n\r\n  const [CurrentImage, setCurrentImage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (user.isLoading && !user.accessToken) {\r\n      navigate(\"/login\");\r\n    } else {\r\n      setCurrentImage(user.photoURL);\r\n    }\r\n  }, [user]);\r\n\r\n  const ImageUpload = (e) => {\r\n    var formData = new FormData();\r\n    formData.append(\"file\", e.target.files[0]);\r\n    axios.post(\"/api/user/profile/img\", formData).then((response) => {\r\n      setCurrentImage(response.data.filePath);\r\n    });\r\n  };\r\n\r\n  const SaveProfile = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await firebase.auth().currentUser.updateProfile({\r\n        photoURL: CurrentImage,\r\n      });\r\n    } catch (error) {\r\n      return alert(\"프로필 저장에 실패하였습니다.\");\r\n    }\r\n    let body = {\r\n      photoURL: CurrentImage,\r\n      uid: user.uid,\r\n    };\r\n    axios.post(\"/api/user/profile/update\", body).then((response) => {\r\n      if (response.data.success) {\r\n        alert(\"프로필 저장에 성공하였습니다.\");\r\n        window.location.reload();\r\n      } else {\r\n        return alert(\"프로필 저장에 실패하였습니다.\");\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <MyPageDiv style={{ width: \"100vw\", height: \"100vh\" }}>\r\n      <form\r\n        style={{\r\n          width: \"50%\",\r\n          margin: \"0 auto\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n          marginTop: \"2rem\",\r\n        }}\r\n      >\r\n        <label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            style={{ display: \"none\" }}\r\n            onChange={(e) => ImageUpload(e)}\r\n          />\r\n          <Avatar\r\n            size=\"100\"\r\n            round={true}\r\n            src={CurrentImage}\r\n            style={{ border: \"1px solid #c6c6c6\", cursor: \"pointer\" }}\r\n          />\r\n        </label>\r\n        <button onClick={(e) => SaveProfile(e)}>저장</button>\r\n      </form>\r\n    </MyPageDiv>\r\n  );\r\n}\r\n\r\nexport default MyPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}