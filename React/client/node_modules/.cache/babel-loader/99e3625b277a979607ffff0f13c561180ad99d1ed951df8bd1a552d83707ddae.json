{"ast":null,"code":"import React from\"react\";import{useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{useParams,useNavigate}from\"react-router-dom\";import Avatar from\"react-avatar\";import axios from\"axios\";import moment from\"moment\";import\"moment/locale/en-nz\";import{PostDiv,Post,BtnDiv}from\"../../Style/PostDetailCSS.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Detail(props){var params=useParams();var navigate=useNavigate();var user=useSelector(function(state){return state.user;});var SetTime=function SetTime(a,b){if(a!==b){return moment(b).format(\"Do MMMM YYYY, hh:mm\")+\"(Edited)\";}else{return moment(a).format(\"Do MMMM YYYY, hh:mm\");}};var DeleteHandler=function DeleteHandler(){if(window.confirm(\"Are you sure you want to delete it?\")){var body={postNum:params.postNum};axios.post(\"/api/post/delete\",body).then(function(response){if(response.data.success){alert(\"Your post has been successfully deleted.\");navigate(\"/search\");}}).catch(function(err){alert(\"Your post failed to be deleted.\");});}};return/*#__PURE__*/_jsxs(PostDiv,{children:[/*#__PURE__*/_jsxs(Post,{children:[/*#__PURE__*/_jsx(\"h1\",{children:props.PostInfo.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"author\",children:[/*#__PURE__*/_jsx(Avatar,{size:\"40\",round:true,src:props.PostInfo.author.photoURL,style:{border:\"1px solid #c6c6c6\"}}),/*#__PURE__*/_jsx(\"p\",{children:props.PostInfo.author.displayName}),/*#__PURE__*/_jsx(\"p\",{className:\"time\",children:SetTime(props.PostInfo.createdAt,props.PostInfo.updatedAt)})]}),props.PostInfo.image?/*#__PURE__*/_jsx(\"img\",{src:props.PostInfo.image,alt:\"\",style:{width:\"100%\",height:\"auto\"}}):null,/*#__PURE__*/_jsx(\"p\",{children:props.PostInfo.content})]}),user.uid===props.PostInfo.author.uid&&/*#__PURE__*/_jsxs(BtnDiv,{children:[/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(props.PostInfo.postNum),children:/*#__PURE__*/_jsx(\"button\",{className:\"edit\",children:\"Edit\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",onClick:function onClick(){return DeleteHandler();},children:\"Delete\"})]})]});}export default Detail;","map":{"version":3,"names":["React","useSelector","Link","useParams","useNavigate","Avatar","axios","moment","PostDiv","Post","BtnDiv","jsx","_jsx","jsxs","_jsxs","Detail","props","params","navigate","user","state","SetTime","a","b","format","DeleteHandler","window","confirm","body","postNum","post","then","response","data","success","alert","catch","err","children","PostInfo","title","className","size","round","src","author","photoURL","style","border","displayName","createdAt","updatedAt","image","alt","width","height","content","uid","to","concat","onClick"],"sources":["C:/Users/jjong/Desktop/React/client/src/Component/Post/Detail.js"],"sourcesContent":["import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport Avatar from \"react-avatar\";\r\nimport axios from \"axios\";\r\n\r\nimport moment from \"moment\";\r\nimport \"moment/locale/en-nz\";\r\n\r\nimport { PostDiv, Post, BtnDiv } from \"../../Style/PostDetailCSS.js\";\r\n\r\nfunction Detail(props) {\r\n  let params = useParams();\r\n  let navigate = useNavigate();\r\n  const user = useSelector((state) => state.user);\r\n\r\n  const SetTime = (a, b) => {\r\n    if (a !== b) {\r\n      return moment(b).format(\"Do MMMM YYYY, hh:mm\") + \"(Edited)\";\r\n    } else {\r\n      return moment(a).format(\"Do MMMM YYYY, hh:mm\");\r\n    }\r\n  };\r\n\r\n  const DeleteHandler = () => {\r\n    if (window.confirm(\"Are you sure you want to delete it?\")) {\r\n      let body = {\r\n        postNum: params.postNum,\r\n      };\r\n      axios\r\n        .post(\"/api/post/delete\", body)\r\n        .then((response) => {\r\n          if (response.data.success) {\r\n            alert(\"Your post has been successfully deleted.\");\r\n            navigate(\"/search\");\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          alert(\"Your post failed to be deleted.\");\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PostDiv>\r\n      <Post>\r\n        <h1>{props.PostInfo.title}</h1>\r\n        <div className=\"author\">\r\n          <Avatar\r\n            size=\"40\"\r\n            round={true}\r\n            src={props.PostInfo.author.photoURL}\r\n            style={{ border: \"1px solid #c6c6c6\" }}\r\n          />\r\n          <p>{props.PostInfo.author.displayName}</p>\r\n          <p className=\"time\">\r\n            {SetTime(props.PostInfo.createdAt, props.PostInfo.updatedAt)}\r\n          </p>\r\n        </div>\r\n        {props.PostInfo.image ? (\r\n          <img\r\n            src={props.PostInfo.image}\r\n            alt=\"\"\r\n            style={{ width: \"100%\", height: \"auto\" }}\r\n          />\r\n        ) : null}\r\n        <p>{props.PostInfo.content}</p>\r\n      </Post>\r\n      {user.uid === props.PostInfo.author.uid && (\r\n        <BtnDiv>\r\n          <Link to={`/edit/${props.PostInfo.postNum}`}>\r\n            <button className=\"edit\">Edit</button>\r\n          </Link>\r\n\r\n          <button className=\"delete\" onClick={() => DeleteHandler()}>\r\n            Delete\r\n          </button>\r\n        </BtnDiv>\r\n      )}\r\n    </PostDiv>\r\n  );\r\n}\r\n\r\nexport default Detail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}