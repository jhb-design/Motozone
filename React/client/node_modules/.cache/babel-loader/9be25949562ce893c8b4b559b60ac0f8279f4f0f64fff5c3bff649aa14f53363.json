{"ast":null,"code":"import _slicedToArray from\"C:/Users/jjong/Desktop/React/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import ImageUpload from\"./ImageUpload.js\";import{UploadDiv,UploadForm,UploadButtonDiv}from\"../../Style/UploadCSS.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Edit(){var params=useParams();var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),PostInfo=_useState2[0],setPostInfo=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),Flag=_useState4[0],setFlag=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),Title=_useState6[0],setTitle=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),Content=_useState8[0],setContent=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),Image=_useState10[0],setImage=_useState10[1];useEffect(function(){var body={postNum:params.postNum};axios.post(\"/api/post/detail\",body).then(function(response){if(response.data.success){setPostInfo(response.data.post);setFlag(true);}}).catch(function(err){console.log(err);});},[]);useEffect(function(){setTitle(PostInfo.title);setContent(PostInfo.content);setImage(PostInfo.image);},[PostInfo]);var onSubmit=function onSubmit(e){e.preventDefault();if(Title===\"\"||Content===\"\"){return alert(\"모든 항목을 채워주세요!\");}var body={title:Title,content:Content,postNum:params.postNum,image:Image};axios.post(\"/api/post/edit\",body).then(function(response){if(response.data.success){alert(\"글 수정이 완료되었습니다.\");navigate(\"/post/\".concat(params.postNum));}else{alert(\"글 수정에 실패하였습니다.\");}}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsx(UploadDiv,{children:Flag&&/*#__PURE__*/_jsxs(UploadForm,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"label\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"input\",{id:\"title\",type:\"text\",value:Title,onChange:function onChange(e){setTitle(e.currentTarget.value);}}),/*#__PURE__*/_jsx(ImageUpload,{setImage:setImage}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",value:Content,onChange:function onChange(e){setContent(e.currentTarget.value);}}),/*#__PURE__*/_jsxs(UploadButtonDiv,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",onClick:function onClick(e){e.preventDefault();navigate(-1);},children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){onSubmit(e);},children:\"\\uC81C\\uCD9C\"})]})]})});}export default Edit;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","axios","ImageUpload","UploadDiv","UploadForm","UploadButtonDiv","jsx","_jsx","jsxs","_jsxs","Edit","params","navigate","_useState","_useState2","_slicedToArray","PostInfo","setPostInfo","_useState3","_useState4","Flag","setFlag","_useState5","_useState6","Title","setTitle","_useState7","_useState8","Content","setContent","_useState9","_useState10","Image","setImage","body","postNum","post","then","response","data","success","catch","err","console","log","title","content","image","onSubmit","e","preventDefault","alert","concat","children","htmlFor","id","type","value","onChange","currentTarget","className","onClick"],"sources":["C:/Users/jjong/Desktop/React/client/src/Component/Post/Edit.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport ImageUpload from \"./ImageUpload.js\";\r\n\r\nimport {\r\n  UploadDiv,\r\n  UploadForm,\r\n  UploadButtonDiv,\r\n} from \"../../Style/UploadCSS.js\";\r\n\r\nfunction Edit() {\r\n  let params = useParams();\r\n  let navigate = useNavigate();\r\n\r\n  const [PostInfo, setPostInfo] = useState({});\r\n  const [Flag, setFlag] = useState(false);\r\n  const [Title, setTitle] = useState(\"\");\r\n  const [Content, setContent] = useState(\"\");\r\n  const [Image, setImage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let body = {\r\n      postNum: params.postNum,\r\n    };\r\n    axios\r\n      .post(\"/api/post/detail\", body)\r\n      .then((response) => {\r\n        if (response.data.success) {\r\n          setPostInfo(response.data.post);\r\n          setFlag(true);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setTitle(PostInfo.title);\r\n    setContent(PostInfo.content);\r\n    setImage(PostInfo.image);\r\n  }, [PostInfo]);\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (Title === \"\" || Content === \"\") {\r\n      return alert(\"모든 항목을 채워주세요!\");\r\n    }\r\n\r\n    let body = {\r\n      title: Title,\r\n      content: Content,\r\n      postNum: params.postNum,\r\n      image: Image,\r\n    };\r\n\r\n    axios\r\n      .post(\"/api/post/edit\", body)\r\n      .then((response) => {\r\n        if (response.data.success) {\r\n          alert(\"글 수정이 완료되었습니다.\");\r\n          navigate(`/post/${params.postNum}`);\r\n        } else {\r\n          alert(\"글 수정에 실패하였습니다.\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <UploadDiv>\r\n      {Flag && (\r\n        <UploadForm>\r\n          <label htmlFor=\"label\">제목</label>\r\n          <input\r\n            id=\"title\"\r\n            type=\"text\"\r\n            value={Title}\r\n            onChange={(e) => {\r\n              setTitle(e.currentTarget.value);\r\n            }}\r\n          />\r\n          <ImageUpload setImage={setImage} />\r\n          <label htmlFor=\"content\">내용</label>\r\n          <textarea\r\n            id=\"content\"\r\n            value={Content}\r\n            onChange={(e) => {\r\n              setContent(e.currentTarget.value);\r\n            }}\r\n          />\r\n          <UploadButtonDiv>\r\n            <button\r\n              className=\"cancel\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                navigate(-1);\r\n              }}\r\n            >\r\n              취소\r\n            </button>\r\n            <button\r\n              onClick={(e) => {\r\n                onSubmit(e);\r\n              }}\r\n            >\r\n              제출\r\n            </button>\r\n          </UploadButtonDiv>\r\n        </UploadForm>\r\n      )}\r\n    </UploadDiv>\r\n  );\r\n}\r\n\r\nexport default Edit;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}