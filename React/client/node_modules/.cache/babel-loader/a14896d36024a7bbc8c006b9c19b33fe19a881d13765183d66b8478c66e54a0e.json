{"ast":null,"code":"import _toConsumableArray from\"C:/Users/jjong/Desktop/React/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/jjong/Desktop/React/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import List from\"./Post/List.js\";import axios from\"axios\";import{DropdownButton,Dropdown}from\"react-bootstrap\";import{GNBDiv,FooterDiv}from\"../Style/SearchPageCSS.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),PostList=_useState2[0],setPostList=_useState2[1];var _useState3=useState(\"Sort by Newest\"),_useState4=_slicedToArray(_useState3,2),Sort=_useState4[0],setSort=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),SearchTerm=_useState6[0],setSearchTerm=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),Skip=_useState8[0],setSkip=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),LoadMore=_useState10[0],setLoadMore=_useState10[1];var getLoadMore=function getLoadMore(){var body={sort:Sort,searchTerm:SearchTerm,skip:Skip};axios.post(\"/api/post/list\",body).then(function(response){if(response.data.success){setPostList([].concat(_toConsumableArray(PostList),_toConsumableArray(response.data.postList)));setSkip(Skip+response.data.postList.length);if(response.data.postList.length<5){setLoadMore(false);}}}).catch(function(err){console.log(err);});};var getPostList=function getPostList(){setSkip(0);var body={sort:Sort,searchTerm:SearchTerm,skip:0};axios.post(\"/api/post/list\",body).then(function(response){if(response.data.success){setPostList(_toConsumableArray(response.data.postList));setSkip(response.data.postList.length);if(response.data.postList.length<5){setLoadMore(false);}if(response.data.postList.length==0){setLoadMore(false);}}}).catch(function(err){console.log(err);});};useEffect(function(){getPostList();},[Sort]);var SearchHandler=function SearchHandler(){getPostList();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(GNBDiv,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:SearchTerm,onChange:function onChange(e){return setSearchTerm(e.currentTarget.value);},onKeyDown:function onKeyDown(e){if(e.keyCode===13)SearchHandler();}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return SearchHandler();},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-search\"})})]}),/*#__PURE__*/_jsxs(DropdownButton,{variant:\"outline-dark\",title:Sort,children:[/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setSort(\"Sort by Newest\");},children:\"Sort by Newest\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setSort(\"Sort by Popularity\");},children:\"Sort by Popularity\"})]})]}),/*#__PURE__*/_jsx(List,{PostList:PostList}),LoadMore&&/*#__PURE__*/_jsx(FooterDiv,{children:/*#__PURE__*/_jsx(\"button\",{style:{marginBottom:\"10vh\"},onClick:function onClick(){return getLoadMore();},children:\"Load More\"})})]});}export default SearchPage;","map":{"version":3,"names":["React","useState","useEffect","List","axios","DropdownButton","Dropdown","GNBDiv","FooterDiv","jsx","_jsx","jsxs","_jsxs","SearchPage","_useState","_useState2","_slicedToArray","PostList","setPostList","_useState3","_useState4","Sort","setSort","_useState5","_useState6","SearchTerm","setSearchTerm","_useState7","_useState8","Skip","setSkip","_useState9","_useState10","LoadMore","setLoadMore","getLoadMore","body","sort","searchTerm","skip","post","then","response","data","success","concat","_toConsumableArray","postList","length","catch","err","console","log","getPostList","SearchHandler","children","className","type","value","onChange","e","currentTarget","onKeyDown","keyCode","onClick","variant","title","Item","style","marginBottom"],"sources":["C:/Users/jjong/Desktop/React/client/src/Component/SearchPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport List from \"./Post/List.js\";\r\nimport axios from \"axios\";\r\nimport { DropdownButton, Dropdown } from \"react-bootstrap\";\r\nimport { GNBDiv, FooterDiv } from \"../Style/SearchPageCSS.js\";\r\n\r\nfunction SearchPage() {\r\n  const [PostList, setPostList] = useState([]);\r\n  const [Sort, setSort] = useState(\"Sort by Newest\");\r\n  const [SearchTerm, setSearchTerm] = useState(\"\");\r\n  const [Skip, setSkip] = useState(0);\r\n  const [LoadMore, setLoadMore] = useState(true);\r\n\r\n  const getLoadMore = () => {\r\n    let body = {\r\n      sort: Sort,\r\n      searchTerm: SearchTerm,\r\n      skip: Skip,\r\n    };\r\n    axios\r\n      .post(\"/api/post/list\", body)\r\n      .then((response) => {\r\n        if (response.data.success) {\r\n          setPostList([...PostList, ...response.data.postList]);\r\n          setSkip(Skip + response.data.postList.length);\r\n          if (response.data.postList.length < 5) {\r\n            setLoadMore(false);\r\n          }\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const getPostList = () => {\r\n    setSkip(0);\r\n\r\n    let body = {\r\n      sort: Sort,\r\n      searchTerm: SearchTerm,\r\n      skip: 0,\r\n    };\r\n\r\n    axios\r\n      .post(\"/api/post/list\", body)\r\n      .then((response) => {\r\n        if (response.data.success) {\r\n          setPostList([...response.data.postList]);\r\n          setSkip(response.data.postList.length);\r\n          if (response.data.postList.length < 5) {\r\n            setLoadMore(false);\r\n          }\r\n          if (response.data.postList.length == 0) {\r\n            setLoadMore(false);\r\n          }\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getPostList();\r\n  }, [Sort]);\r\n\r\n  const SearchHandler = () => {\r\n    getPostList();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <GNBDiv>\r\n        <div className=\"search\">\r\n          <input\r\n            type=\"text\"\r\n            value={SearchTerm}\r\n            onChange={(e) => setSearchTerm(e.currentTarget.value)}\r\n            onKeyDown={(e) => {\r\n              if (e.keyCode === 13) SearchHandler();\r\n            }}\r\n          />\r\n          <button onClick={() => SearchHandler()}>\r\n            <i className=\"bi bi-search\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        <DropdownButton variant=\"outline-dark\" title={Sort}>\r\n          <Dropdown.Item onClick={() => setSort(\"Sort by Newest\")}>\r\n          Sort by Newest\r\n          </Dropdown.Item>\r\n          <Dropdown.Item onClick={() => setSort(\"Sort by Popularity\")}>\r\n          Sort by Popularity\r\n          </Dropdown.Item>\r\n        </DropdownButton>\r\n      </GNBDiv>\r\n      <List PostList={PostList} />\r\n      {LoadMore && (\r\n        <FooterDiv>\r\n          <button\r\n            style={{ marginBottom: \"10vh\" }}\r\n            onClick={() => getLoadMore()}\r\n          >\r\n            Load More\r\n          </button>\r\n        </FooterDiv>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}